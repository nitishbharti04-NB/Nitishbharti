<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>NITI Professional Assessment Portal</title>

<link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Pinyon+Script&family=Montserrat:wght@400;700&display=swap" rel="stylesheet">

<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<style>
/* App Interface Styles */
body { margin:0; font-family:'Montserrat', sans-serif; background:#1a1a1a; color:white; }
.container { max-width:1000px; margin:40px auto; padding:20px; }
.card { background:white; color:#333; padding:30px; border-radius:15px; box-shadow:0 10px 40px rgba(0,0,0,0.5); }
button { background:linear-gradient(135deg,#003366,#00509d); color:white; border:none; padding:12px 25px; border-radius:5px; cursor:pointer; font-weight:700; font-size:16px; transition:0.3s; }
button:hover { background:#c5a059; color:#003366; }
input { width:100%; padding:12px; margin:10px 0; border:1px solid #ccc; border-radius:5px; font-size:16px; box-sizing:border-box; }
#timer { font-size:24px; color:#ffcc00; text-align:center; margin-bottom:10px; font-weight:700; }
.option { display:block; background:#f9f9f9; padding:12px; margin:10px 0; border:1px solid #eee; border-radius:8px; cursor:pointer; transition:0.2s; }
.option:hover { background:#f0f0f0; border-color:#c5a059; }

/* =========================================
   CERTIFICATE CSS (EXACTLY SAME AS PROVIDED)
   ========================================= */
.cert-container { width: 1000px; height: 650px; padding: 20px; background-color: #003366; position: relative; box-sizing: border-box; margin: 0 auto; }
.cert-inner-frame { background: #fff; background-image: radial-gradient(#fff, #fdfbf2); height: 100%; width: 100%; border: 4px solid #c5a059; position: relative; box-sizing: border-box; padding: 40px; text-align: center; box-shadow: inset 0 0 50px rgba(197, 160, 89, 0.1); }
.cert-inner-frame::before { content: '⚜'; position: absolute; top: 10px; left: 10px; color: #c5a059; font-size: 24px; }
.cert-title { font-family: 'Cinzel', serif; font-size: 48px; color: #1a1a1a; font-weight: 700; margin: 0; border-bottom: 3px solid #c5a059; display: inline-block; padding-bottom: 5px; }
.cert-subtext { font-family: 'Montserrat', sans-serif; text-transform: uppercase; letter-spacing: 2px; margin-top: 25px; font-size: 16px; color: #555; }
.cert-name { font-family: 'Pinyon Script', cursive; font-size: 70px; color: #003366; margin: 15px 0; }
.cert-course-line { font-family: 'Montserrat', sans-serif; font-size: 20px; color: #333; }
.cert-course-line strong { font-family: 'Cinzel', serif; font-size: 32px; color: #000; display: block; margin-top: 10px; }
.cert-stats { margin-top: 20px; font-size: 18px; line-height: 1.8; color: #444; }
.cert-footer-link { font-size: 13px; color: #777; margin-top: 25px; }
.niti-branding-block { margin-top: 20px; }
.niti-label { font-family: 'Cinzel', serif; font-size: 22px; font-weight: 700; color: #003366; margin-bottom: 2px; }
.cert-id-tag { font-weight: 700; font-size: 14px; background: #f0f0f0; padding: 5px 15px; border-radius: 4px; display: inline-block; border: 1px solid #ddd; }
.cert-bottom { display: flex; justify-content: space-between; align-items: flex-end; position: absolute; bottom: 40px; left: 40px; right: 40px; }
.seal-box { width: 120px; height: 120px; background: radial-gradient(circle, #f9d976, #f39c12); border-radius: 50%; border: 3px dashed #7d5a00; display: flex; align-items: center; justify-content: center; text-align: center; color: #7d5a00; font-weight: 700; font-size: 12px; box-shadow: 0 5px 15px rgba(0,0,0,0.2); }
.sig-area { text-align: center; width: 220px; }
.sig-name { font-family: 'Pinyon Script', cursive; font-size: 30px; color: #000; margin-bottom: -10px; }
.sig-line { border-top: 2px solid #333; padding-top: 5px; font-weight: 700; font-size: 14px; color: #000; }
</style>
</head>
<body>

<div class="container">
    <div id="login-screen" class="card">
        <h1 style="text-align:center; color:#003366">NITI Skill Assessment</h1>
        <p style="text-align:center">Enter your official name for the certificate.</p>
        <input id="userName" type="text" placeholder="Your Full Name">
        <input id="userEmail" type="email" placeholder="Email Address">
        <button style="width:100%" onclick="goToSubject()">Next Step</button>
    </div>

    <div id="subject-screen" class="card" style="display:none">
        <h2>Select Subject (15 Hard Questions)</h2>
        <div style="display:grid; grid-template-columns: 1fr 1fr; gap:10px">
            <button onclick="startQuiz('Excel')">Advanced Excel</button>
            <button onclick="startQuiz('SQL')">Complex SQL</button>
            <button onclick="startQuiz('Python')">Python Pro</button>
            <button onclick="startQuiz('Power BI')">Power BI Expert</button>
        </div>
    </div>

    <div id="quiz-screen" style="display:none">
        <div id="timer">Time Left: 20:00</div>
        <div id="quiz-container" class="card"></div>
    </div>

    <div id="result-screen" style="display:none">
        <div id="cert-capture-area">
            <div class="cert-container">
                <div class="cert-inner-frame">
                    <div class="cert-title">Certificate of Completion</div>
                    <div class="cert-subtext">This is to certify that</div>
                    <div id="disp-name" class="cert-name">Student Name</div>
                    <div class="cert-course-line">has successfully completed the <strong id="disp-skill">Excel Test</strong></div>
                    <div class="cert-stats">
                        <strong>Score:</strong> <span id="disp-score">0/15</span> &nbsp; | &nbsp; 
                        <strong>Grade:</strong> <span id="disp-grade">Beginner</span> <br>
                        <strong>Date:</strong> <span id="disp-date">Jan 16, 2026</span>
                    </div>
                    <div class="cert-footer-link">
                        Thanks for visiting our page — <u>https://nitishbharti04-nb.github.io/Nitishbharti/</u>
                    </div>
                    <div class="niti-branding-block">
                        <div class="niti-label">NITI</div>
                        <div id="disp-id" class="cert-id-tag">NITI CERT - A08KCF5Y</div>
                    </div>
                    <div class="cert-bottom">
                        <div class="seal-box">OFFICIAL<br>GRADUATE</div>
                        <div class="sig-area">
                            <div class="sig-name">Program Director</div>
                            <div class="sig-line">Signature</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div style="text-align:center; margin-top:20px;">
            <button onclick="downloadPDF()">Download Official PDF Certificate</button>
            <button style="background:#666" onclick="location.reload()">Take Another Test</button>
        </div>
    </div>
</div>

<script>
let currentUser="", currentEmail="", currentSkill="", currentTest=[], userAnswers=[], currentIndex=0, timerObj=null, timeLeft=1200;

function goToSubject() {
    currentUser=document.getElementById('userName').value.trim();
    if(!currentUser) return alert("Enter Name");
    document.getElementById('login-screen').style.display='none';
    document.getElementById('subject-screen').style.display='block';
}

function startQuiz(skill) {
    currentSkill=skill;
    document.getElementById('subject-screen').style.display='none';
    document.getElementById('quiz-screen').style.display='block';
    let allQs=getHardPool(skill);
    currentTest=shuffle(allQs).slice(0,15);
    userAnswers=new Array(15).fill(null);
    startTimer();
    renderQuestion();
}

function startTimer() {
    timerObj=setInterval(()=>{
        timeLeft--;
        let m=Math.floor(timeLeft/60), s=timeLeft%60;
        document.getElementById('timer').textContent=`Time Left: ${m}:${s<10?'0'+s:s}`;
        if(timeLeft<=0) finishQuiz();
    },1000);
}

function renderQuestion() {
    const q=currentTest[currentIndex];
    const html=`
        <h3 style="color:#003366">Question ${currentIndex+1} of 15 (Hard)</h3>
        <p style="font-size:18px; font-weight:700">${q.txt}</p>
        ${q.opts.map((o,i)=>`
            <label class="option">
                <input type="radio" name="quiz_opt" value="${i}" ${userAnswers[currentIndex]===i?'checked':''}> ${o}
            </label>`).join('')}
        <div style="margin-top:20px; text-align:center">
            ${currentIndex>0?'<button onclick="prevQ()">Previous</button>':''}
            ${currentIndex<14?'<button onclick="nextQ()">Next</button>':'<button onclick="finishQuiz()">Finish Test</button>'}
        </div>`;
    document.getElementById('quiz-container').innerHTML=html;
}

function saveAns() {
    const sel=document.querySelector('input[name="quiz_opt"]:checked');
    if(sel) userAnswers[currentIndex]=parseInt(sel.value);
}
function nextQ(){saveAns();currentIndex++;renderQuestion();}
function prevQ(){saveAns();currentIndex--;renderQuestion();}

function finishQuiz() {
    saveAns();
    clearInterval(timerObj);
    let score=0;
    currentTest.forEach((q,i)=>{if(userAnswers[i]===q.ans) score++;});
    const grade=score>=12?"Excellent":(score>=8?"Advanced":"Beginner");
    const certId="NITI-"+Math.random().toString(36).substring(2,10).toUpperCase();
    document.getElementById('disp-name').textContent=currentUser;
    document.getElementById('disp-skill').textContent=currentSkill+" Test";
    document.getElementById('disp-score').textContent=`${score}/15`;
    document.getElementById('disp-grade').textContent=grade;
    document.getElementById('disp-id').textContent="NITI CERT - "+certId;
    document.getElementById('disp-date').textContent=new Date().toDateString();
    document.getElementById('quiz-screen').style.display='none';
    document.getElementById('result-screen').style.display='block';
}

async function downloadPDF() {
    const element=document.getElementById('cert-capture-area');
    const canvas=await html2canvas(element,{scale:2});
    const imgData=canvas.toDataURL('image/png');
    const { jsPDF }=window.jspdf;
    const pdf=new jsPDF('l','px',[canvas.width,canvas.height]);
    pdf.addImage(imgData,'PNG',0,0,canvas.width,canvas.height);
    pdf.save(`${currentUser}_NITI_Certificate.pdf`);
}

function shuffle(arr){return arr.sort(()=>Math.random()-0.5);}

function getHardPool(cat){
    // 20 example hard questions per category
    return [
        {txt:"Excel: Which array formula would find 2nd most frequent text?",opts:["=MODE(A1:A50)","=INDEX(A1:A50,MATCH(MAX(COUNTIF(...)))","=LARGE(FREQUENCY(...))","Not possible"],ans:1},
        {txt:"SQL: Which join returns only unmatched rows from both tables?",opts:["FULL OUTER JOIN","INNER JOIN","CROSS JOIN","FULL OUTER JOIN with NULL filter"],ans:3},
        {txt:"Python: Time complexity of Timsort?",opts:["O(n log n)","O(n^2)","O(log n)","O(n)"],ans:0},
        {txt:"Power BI: DAX function ignoring filters?",opts:["FILTER()","ALL()","CALCULATE()","RELATED()"],ans:1},
        {txt:"Excel: Function to return unique values?",opts:["UNIQUE()","DISTINCT()","VALUE()","FILTER()"],ans:0},
        {txt:"SQL: Change table structure?",opts:["UPDATE","MODIFY","ALTER","CHANGE"],ans:2},
        {txt:"Python: '__add__' is?",opts:["__init__","__add__","__call__","__str__"],ans:1},
        {txt:"Excel: #SPILL! error signifies?",opts:["Reference Error","Range Busy","Formula Too Long","Memory Full"],ans:1},
        {txt:"Power BI: Primary use of 'M' language?",opts:["Data Visualization","Data Modeling","Data Transformation","Report Sharing"],ans:2},
        {txt:"SQL: Rank without gaps?",opts:["RANK()","DENSE_RANK()","ROW_NUMBER()","PERCENT_RANK()"],ans:1},
        {txt:"Python: Lambda function is?",opts:["Recursive function","Anonymous function","Built-in function","System function"],ans:1},
        {txt:"Excel: Shortcut to evaluate formula parts?",opts:["F2","F4","F9","F5"],ans:2},
        {txt:"Python: 'requests' default protocol?",opts:["FTP","SMTP","HTTP/HTTPS","SSH"],ans:2},
        {txt:"SQL: Group rows and filter sum?",opts:["WHERE","HAVING","ORDER BY","LIMIT"],ans:1},
        {txt:"Excel: Max nested IFs modern?",opts:["7","64","255","Unlimited"],ans:1},
        {txt:"Python: 3 * 'A'?",opts:["AAA","Error","3","A"],ans:0},
        {txt:"SQL: Constraint for unique values?",opts:["CHECK","UNIQUE","NOT NULL","DEFAULT"],ans:1},
        {txt:"Power BI: Real-time data storage mode?",opts:["Import","DirectQuery","Dual","Composite"],ans:1},
        {txt:"Excel: XLOOKUP replaces?",opts:["VLOOKUP","HLOOKUP","INDEX/MATCH","All of these"],ans:3},
        {txt:"Python: __name__ == '__main__'?",opts:["Error handling","Module execution control","Class definition","Importing"],ans:1}
    ];
}
</script>
</body>
</html>
